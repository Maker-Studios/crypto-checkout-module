'use client'

import Checkout from '@/components/payout/Checkout'
import { useState } from 'react'

const AppLogo = (
  <svg width={42} height={43} viewBox="0 0 42 43" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect y="0.666504" width={42} height={42} rx={21} fill="#00BD57" />
    <mask
      id="mask0_863_2881"
      style={{ maskType: 'alpha' }}
      maskUnits="userSpaceOnUse"
      x={9}
      y={9}
      width={24}
      height={25}
    >
      <rect x={9} y="9.40186" width={24} height={24} fill="#D9D9D9" />
    </mask>
    <g mask="url(#mask0_863_2881)">
      <path
        d="M21.05 22.7769L15.125 28.7019C14.925 28.9019 14.6875 29.0019 14.4125 29.0019C14.1375 29.0019 13.9 28.9019 13.7 28.7019C13.5 28.5019 13.4 28.2644 13.4 27.9894C13.4 27.7144 13.5 27.4769 13.7 27.2769L22.6 18.4019H20V19.4019C20 19.6852 19.9042 19.9227 19.7125 20.1144C19.5208 20.306 19.2833 20.4019 19 20.4019C18.7167 20.4019 18.4792 20.306 18.2875 20.1144C18.0958 19.9227 18 19.6852 18 19.4019V17.4019C18 17.1185 18.0958 16.881 18.2875 16.6894C18.4792 16.4977 18.7167 16.4019 19 16.4019H23.85C24.1167 16.4019 24.3708 16.4519 24.6125 16.5519C24.8542 16.6519 25.0667 16.7935 25.25 16.9769L28.25 19.9519C28.5833 20.2852 28.9708 20.5644 29.4125 20.7894C29.8542 21.0144 30.3333 21.1769 30.85 21.2769C31.1333 21.3269 31.3792 21.456 31.5875 21.6644C31.7958 21.8727 31.9 22.1185 31.9 22.4019C31.9 22.6852 31.7833 22.9185 31.55 23.1019C31.3167 23.2852 31.0583 23.3602 30.775 23.3269C30.025 23.2269 29.3333 23.0269 28.7 22.7269C28.0667 22.4269 27.4833 22.0185 26.95 21.5019L25.95 20.4519L23.75 22.6519L25.075 23.9769C25.3083 24.2102 25.4042 24.4894 25.3625 24.8144C25.3208 25.1394 25.1583 25.3852 24.875 25.5519L20.325 28.1769C20.0917 28.3102 19.8375 28.3435 19.5625 28.2769C19.2875 28.2102 19.0833 28.0602 18.95 27.8269C18.8167 27.5935 18.7875 27.3394 18.8625 27.0644C18.9375 26.7894 19.0917 26.5852 19.325 26.4519L22.75 24.4769L21.05 22.7769ZM13 22.4019C12.7167 22.4019 12.4792 22.306 12.2875 22.1144C12.0958 21.9227 12 21.6852 12 21.4019C12 21.1185 12.0958 20.881 12.2875 20.6894C12.4792 20.4977 12.7167 20.4019 13 20.4019H16C16.2833 20.4019 16.5208 20.4977 16.7125 20.6894C16.9042 20.881 17 21.1185 17 21.4019C17 21.6852 16.9042 21.9227 16.7125 22.1144C16.5208 22.306 16.2833 22.4019 16 22.4019H13ZM11 19.4019C10.7167 19.4019 10.4792 19.306 10.2875 19.1144C10.0958 18.9227 10 18.6852 10 18.4019C10 18.1185 10.0958 17.881 10.2875 17.6894C10.4792 17.4977 10.7167 17.4019 11 17.4019H14C14.2833 17.4019 14.5208 17.4977 14.7125 17.6894C14.9042 17.881 15 18.1185 15 18.4019C15 18.6852 14.9042 18.9227 14.7125 19.1144C14.5208 19.306 14.2833 19.4019 14 19.4019H11ZM28.475 17.4019C27.925 17.4019 27.45 17.206 27.05 16.8144C26.65 16.4227 26.45 15.9519 26.45 15.4019C26.45 14.8519 26.65 14.381 27.05 13.9894C27.45 13.5977 27.925 13.4019 28.475 13.4019C29.025 13.4019 29.5 13.5977 29.9 13.9894C30.3 14.381 30.5 14.8519 30.5 15.4019C30.5 15.9519 30.3 16.4227 29.9 16.8144C29.5 17.206 29.025 17.4019 28.475 17.4019ZM13 16.4019C12.7167 16.4019 12.4792 16.306 12.2875 16.1144C12.0958 15.9227 12 15.6852 12 15.4019C12 15.1185 12.0958 14.881 12.2875 14.6894C12.4792 14.4977 12.7167 14.4019 13 14.4019H16C16.2833 14.4019 16.5208 14.4977 16.7125 14.6894C16.9042 14.881 17 15.1185 17 15.4019C17 15.6852 16.9042 15.9227 16.7125 16.1144C16.5208 16.306 16.2833 16.4019 16 16.4019H13Z"
        fill="white"
      />
    </g>
  </svg>
)

const HomePage = () => {
  const [checkoutUID, setCheckoutUID] = useState<string>()

  const handlePaymentMethod = async ({ type, email }: { type: 'stripe' | 'crypto'; email: string }) => {
    console.log(`DEBUG: ${email} chose ${type}`)
    const uid = (await new Promise((res) => {
      setTimeout(() => {
        res(`someUniqueID`)
      }, 1000)
    })) as string
    // set uid after server-side processing with info
    setCheckoutUID(uid)
  }

  return (
    <>
      <div className="min-h-screen grid place-items-center bg-[#ECECEC]">
        <Checkout
          title="Payment Modal Test"
          pricing={1}
          logo={AppLogo}
          confirmations={1}
          checkoutUID={checkoutUID}
          onPaymentMethodSubmit={handlePaymentMethod}
          onCompleted={() => {
            console.log(`Payment is completed`)
            // you can redirect after user clicks done at the end of checkout
          }}
          vendor={process.env.NEXT_PUBLIC_VENDORADDRESS}
          checkoutContract={process.env.NEXT_PUBLIC_CHECKOUT}
          pricingDescription={`Some description text about this plan.
          
          It can be multi-line and dynamic or even a react component`}
          successMessage={`A thank you message to the customer.
          
          Say something nice ;)`}
        />
      </div>
    </>
  )
}

export default HomePage
